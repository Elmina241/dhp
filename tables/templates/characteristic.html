{% extends 'tables/base.html' %}
{% block content %}

<script type="text/javascript">
  $(document).ready(function(){
    //getCharVal();
  });
</script>
<div class="panel panel-default" style ="margin: auto">
  <div class="panel-heading">
    {% if characteristic == None %}
      <h4 class="panel-title">Добавление записи</h4>
      {% else %}
      <h4 class="panel-title">Редактирование записи: {{ characteristic }}</h4>
      {% endif %}
  </div>

  {% if error_message %}
  <p><strong>{{ error_message }}</strong></p>
  {% endif %}
<div class="panel-body">
  <div class="input-group" style ="margin: auto">
    <form action="save_characteristic/" method="post">
      {% csrf_token %}
          <h5><b>Тип характеристики:</b><h5>
          <p><select class="form-control" name="type" id="type" onchange="getCharVal();">
            {% for t in types %}
            {% if characteristic.type == t %}
            <option selected value="{{t.id}}">{{t.name}}</option>
            {% else %}
            <option value="{{t.id}}">{{t.name}}</option>
            {% endif %}
            {% endfor %}
          </select></p></p>
          <br><br><br>
          <h5><b>Наименование:</b><h5>
          <input type="text" class="form-control" placeholder="Наименование" size = "50" name = "name" value="{{ caracteristic.name }}" required></p>
          <br><br><br>

          <div id="charVal">
            <div class="modal fade" id="newComp">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <button class="close" data-dismiss="modal">x</button>
                    <h4>Добавление элемента</h4>
                  </div>
                  <div class="modal-body">
                    <div class="form-group" style='margin-bottom: 20pt'><input id='elem' name='elem' class='form-control' type='text'></div>
                  </div>
                  <div class="modal-footer"><button type="button" class="btn btn-primary" onclick="addElem()" data-dismiss="modal">Добавить</button></div>
                </div>
              </div>
            </div>
            <div class='panel panel-default'>
              <div class='panel-heading'>
                <button class="btn btn-success" data-toggle="modal" data-target="#newComp"><i class="glyphicon glyphicon-plus"></i> Добавить элемент множества</button>
              </div>
            <div class='panel-body'>
            <table class='table table-sm' id='elems'>
              <thead><tr><th>Значение</th></tr></thead><tbody></tbody></table>
            </div></div></div>
          </div>

          <input type="submit" id="send" value="Сохранить" class="btn btn-primary" style="float: right"/>
    </div>
    </div>
  </form>
  </div>

{% endblock content %}

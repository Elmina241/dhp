{% extends 'processes/base.html' %}
{% block content %}

<script type="text/javascript">
$(document).ready(function (){
    var MyDate = document.getElementById("MyDate");
    var dt=new Date();
    var month = dt.getMonth()+1;
    if (month<10) month='0'+month;
    var day = dt.getDate();
    if (day<10) day='0'+day;
    var year = dt.getFullYear();
    MyDate.value=day+'.'+month+'.'+year;
});
</script>

<div class="panel panel-default" style ="margin: auto">
  <div class="panel-heading">
    {% if list == None %}
      <h4 class="panel-title">Добавление записи</h4>
      {% else %}
      <h4 class="panel-title">Редактирование записи: {{ list }}</h4>
      {% endif %}
  </div>
  {% if error_message %}
  <p><strong>{{ error_message }}</strong></p>
  {% endif %}
<div class="panel-body">
  <div class="input-group" style ="margin: auto">
    <form action="save_list/" method="post" class="form-horizontal">
      {% csrf_token %}
      <div class="form-group"><label for="MyDate" class="col-sm-2 control-label" style="font-size: medium">Дата: </label><div class="col-sm-10"><input id="MyDate" type="text" class="form-control" readonly></div>
  </div>
  <div class="form-group"><label for="ammount" class="col-sm-2 control-label" style="font-size: medium">Объём: </label><div class="col-sm-10"><input id="ammount" name="ammount" type="number" class="form-control" onchange="changeWater();return false;" value="{{list.ammount}}"></div>
</div>
      <div class="form-group">
        <label for="material" class="col-sm-2 control-label" style="font-size: medium">Состав: </label>
        <div class="col-sm-10">
        <select class="form-control" id="composition" name="composition" style="width:78.5%">
          {% for c in compositions %}
          <option value="{{ c.id }}">{{ c.get_name }}</option>
          {% endfor %}</select>
          <button type="button" class="btn btn-default" onclick="getComponents({{components}}, {{materials}});return false;" style="margin-left:2%">Выбрать</button>
        </div>

      </div>
      <br><br>
      <table class="table table-sm" id="materials" style="width:100%; margin: auto">
        <thead>
          <tr>
            <th>Код</th><th>Наименование</th><th>Минимум</th><th>Максимум</th><th>Количество</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>ВД01</td>
            <td>Вода</td>
            <td>-</td>
            <td>-</td>
            <td id="water"></td>
          </tr>
        </tbody>
      </table>
      <br>
      <input type="hidden" id="json" name="json" value="">
      <input type="submit" value="Сохранить" class="btn btn-primary" style="float: right"/>
  </div>
  </form>
</div>
{% endblock content %}
